<ion-header class="ion-no-border">
  <ion-toolbar>
    <div style="display: flex; ;" class="devheader">

      <h3>Dashboard</h3>
      <div class="devprofile">
        <div class="devprofilename">
          <p style="font-weight: 900;">{{dataHelper.user.FullName}}</p>
          <p>{{dataHelper.user.Skills}}</p>
        </div>

        <div class="devavatar" slot="end">
          <ion-avatar (click)="gotoprofile()" slot="end"><img
              src="../../assets/LogIn team/admin Leave forms/Ellipse 13.png" alt=""></ion-avatar>
        </div>
      </div>
    </div>
  </ion-toolbar>

</ion-header>

<ion-content>

  <div class="devdailyreport">
    <div class="devdailycircle">
    </div>
    <div class="devdailycontent">
      <h1>Daily reports charts</h1>
      <p *ngIf='this.dataHelper.dataFetched == true;'>{{dataHelper.reports?.length}}</p>
      <p *ngIf='this.dataHelper.dataFetched == false;'>
        <ion-skeleton-text animated></ion-skeleton-text>
      </p>
    </div>
  </div>
  <div class="devmain">
    <!-- <div class="devchart">
    <img style="    width: 100%;" src="../../assets/LogIn team/main user screen/miancart.png" alt="">
  </div> -->
    <ion-list class="cus-card">
      <!-- <ion-list-header>
      <ion-label>
        Select Chart type
      </ion-label>
    </ion-list-header> -->

      <ion-item class="ion-padding-horizontal" lines="none">
        <ion-label> Charts </ion-label>
        <ion-select value="bar" okText="Create" cancelText="Cancel" mode="ios" (ionChange)="changeChart($event)"
          color="danger">
          <ion-select-option value="bar">Bar</ion-select-option>
          <ion-select-option value="line">Lines</ion-select-option>
          <ion-select-option value="radar">Radar</ion-select-option>
          <ion-select-option value="doughnut">Doughnut</ion-select-option>
          <ion-select-option value="pie">Pie</ion-select-option>
        </ion-select>
      </ion-item>

    </ion-list>
    <div class="bg-white cus-card">
      <canvas #chartCanvas></canvas>
    </div>

    <div class="devreview">
      <p>You are so lazy please keep it up</p>
    </div>

    <div class="devreportcontent">
      <div (click)="gotodailyreport()" class="devReport">
        <div class="devIcon">
          <ion-icon name="pie-chart"></ion-icon>
        </div>
        <div class="devtitle">
          <h1>Daily Report</h1>
        </div>
        <div class="devCounter">
          <p *ngIf='this.dataHelper.dataFetched == true;'>{{dataHelper.reports?.length}}</p>
          <p *ngIf='this.dataHelper.dataFetched == false;'>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </div>
      </div>

      <div (click)="gotoleaveform()" class="devleaveform">
        <div class="devleaveformIcon">
          <ion-icon name="document-text-outline"></ion-icon>
        </div>
        <div class="devleaveformtitle">
          <h1>Leave Form</h1>
        </div>
        <div class="devleaveformCounter">
          <p *ngIf='this.dataHelper.dataFetched == true;'>{{dataHelper.leavesData?.length}}</p>
          <p *ngIf='this.dataHelper.dataFetched == false;'>
            <ion-skeleton-text animated></ion-skeleton-text>
          </p>
        </div>
      </div>

      <h2 style="font-weight: 600;">Recently Reports</h2>
      <div class="devReports" style="display: none;">
        <ion-segment scrollable="true" value="heart" mode="md" [(ngModel)]="month">
          <ion-segment-button *ngFor="let m of this.dataHelper.adminReports" [value]="m.month">
            <ion-label >{{m.month}}</ion-label>
          </ion-segment-button>
        </ion-segment>
    </div>
    
    <div  [ngSwitch]="month">
      <div  *ngFor="let m of dataHelper.reportsData  " [class.hide]="month!=m.month"  class="january">
        <div *ngSwitchCase="m.month"  >
          <ion-row  *ngIf="!dataHelper.dataFetched" class="spinner">
            <ion-spinner></ion-spinner>
          </ion-row>
          <ion-card *ngFor="let leave of m.array | slice:0:2" (click)="gotoreportdetail(leave)" class="repotdetail" >
            <div class="reportcontent">
              <h3>{{leave.title}}</h3>
             <p style="margin: 0;  ">{{(leave.description?.length>80)? (leave.description | slice:0:80)+'...':(leave.description)}}</p>
              <div class="devreporttime">
                <ion-icon name="time-outline"></ion-icon>
                <p>{{leave.timeStamp | date : 'dd-MM-yyyy hh:mm a'}}</p>
              </div>
            </div>
              <ion-icon class="deviconforword" size="large" name="chevron-forward-outline"></ion-icon>
           </ion-card>
        </div>
        
      </div>
    </div>

    </div>
  </div>
  <!-- <ion-item>

    <ion-select (ionChange)="changeBackgroundColorOfStatusBar($event)">
      <ion-select-option *ngFor="let color of colorCodes" [value]="color.code">{{color.name}}</ion-select-option>
    </ion-select>
  </ion-item> -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button class="fab2">
      <ion-icon name="chatbox" (click)="openChat()"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>